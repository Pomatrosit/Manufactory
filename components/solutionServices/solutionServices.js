import style from "./solutionServices.module.css";
import SolutionsArrow from "../svgComponents/solutionsArrow";
import {useRef, useEffect} from "react";

const SolutionServices = () => {

  const mainRef = useRef();
  const serviceRef = useRef();

  const card1 = useRef();const card2 = useRef();const card3 = useRef();const card4 = useRef();
  const card5 = useRef();const card6 = useRef();const card7 = useRef();const card8 = useRef();
  const cardArr = [card1, card2, card3];

  const APP_WRAPPER_MAX_WIDTH = 1200;
  const APP_WRAPPER_WIDTH = 0.95;
  const SERVICES_HEIGHT = 3000;

  const onScroll = () => {
    const distanceToTop = serviceRef.current.getBoundingClientRect().top;

    // Двигаем блок

    if (distanceToTop >= 0) {
      mainRef.current.style.position = "absolute";
      mainRef.current.style.top = "0";
      mainRef.current.style.left = "0";
      mainRef.current.style.width = "100%";
    }
    else if (distanceToTop < 0 && distanceToTop > document.documentElement.clientHeight - SERVICES_HEIGHT){
      const clientWidth = document.documentElement.clientWidth;
      let left; let width;

      if (clientWidth > APP_WRAPPER_MAX_WIDTH/APP_WRAPPER_WIDTH) {
        left = `calc(${(clientWidth - APP_WRAPPER_MAX_WIDTH)/2}px)`;
        width="1200px";
      }
      else {
        left="2.5%";
        width="95%";
      }

      mainRef.current.style.position = "fixed";
      mainRef.current.style.top = 0;
      mainRef.current.style.left = left;
      mainRef.current.style.width = width;
    }
    else {
      mainRef.current.style.position="absolute";
      mainRef.current.style.left = "0";
      mainRef.current.style.width = "100%";
      mainRef.current.style.top = `${SERVICES_HEIGHT - document.documentElement.clientHeight}px`;
    }

    // Двигаем карточки
    if (distanceToTop > 0) card1.current.style.transform = `translateY(${distanceToTop}px)`;
    if (distanceToTop > -390) card2.current.style.transform = `translateY(${distanceToTop}px)`;
    if (distanceToTop > -780) card3.current.style.transform = `translateY(${distanceToTop}px)`;
    if (distanceToTop > -1170) card4.current.style.transform = `translateY(${distanceToTop}px)`;
    if (distanceToTop > -1560) card5.current.style.transform = `translateY(${distanceToTop}px)`;
  }

  useEffect(() => {
    window.addEventListener("scroll", onScroll);
    return () => {
      window.removeEventListener("scroll", onScroll);
    }
  }, [])

  return(
    <section className={style.services} ref={serviceRef}>
      <div className="app-wrapper">

        <div className={style.services__main} ref={mainRef}>
          <h3 className="section__subtitle" style={{textAlign:"left"}}>Услуги</h3>
          <h2 className="section__title" style={{textAlign:"left", maxWidth:416, zIndex:1, position:"relative"}}>Что входит в стоимость разработки</h2>
          <SolutionsArrow />

          <div className={style.card + " " + style.card1} ref={card1}>
            <svg style={{marginBottom:"75px"}}width="38" height="40" viewBox="0 0 38 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.1973 13.9653C10.9843 13.9653 11.6223 14.6014 11.6223 15.386C11.6223 16.1053 11.0862 16.6997 10.3907 16.7937L10.1973 16.8067H8.4075C5.44851 16.8067 3.02852 19.1132 2.85944 22.0201L2.85 22.3455V31.599C2.85 34.5595 5.17183 36.9801 8.09887 37.1492L8.4265 37.1586H29.5925C32.5528 37.1586 34.9716 34.8526 35.1406 31.9435L35.15 31.6179V22.3664C35.15 19.4042 32.8302 16.9852 29.903 16.8161L29.5754 16.8067H27.8027C27.0157 16.8067 26.3777 16.1707 26.3777 15.386C26.3777 14.6668 26.9138 14.0724 27.6093 13.9783L27.8027 13.9653H29.5754C34.0963 13.9653 37.7838 17.5136 37.9908 21.9708L38 22.3664V31.6179C38 36.1156 34.4485 39.7849 29.9883 39.9909L29.5925 40H8.4265C3.90595 40 0.216318 36.4503 0.00917252 31.9944L0 31.599V22.3455C0 17.8538 3.54693 14.1868 8.00023 13.975L8.4075 13.9653H10.1973ZM19.0004 0C19.7218 0 20.318 0.534472 20.4124 1.22791L20.4254 1.42069L20.425 20.7876L23.5311 17.6811C24.036 17.1757 24.8275 17.1282 25.3862 17.5398L25.5463 17.677C26.0533 18.1803 26.1009 18.9695 25.6881 19.5265L25.5505 19.6861L20.0101 25.2325C19.9634 25.2785 19.9159 25.32 19.8657 25.3583L20.0101 25.2325C19.9402 25.3025 19.8648 25.3637 19.7853 25.4161C19.7564 25.4345 19.7263 25.4527 19.6955 25.4699C19.676 25.4815 19.6564 25.4918 19.6366 25.5017C19.5971 25.5207 19.5562 25.5388 19.5144 25.5549C19.4928 25.5637 19.4713 25.5714 19.4497 25.5786C19.4101 25.5912 19.369 25.6028 19.3271 25.6126C19.3044 25.6184 19.2822 25.623 19.26 25.6271C19.2239 25.6333 19.1864 25.6387 19.1485 25.6426C19.1098 25.647 19.0717 25.6494 19.0336 25.6503C19.0224 25.65 19.0114 25.6501 19.0004 25.6501L18.969 25.6504C18.9303 25.6495 18.8915 25.6471 18.8529 25.6431L19.0004 25.6501C18.9114 25.6501 18.8243 25.642 18.7398 25.6264C18.7184 25.623 18.6961 25.6183 18.674 25.6131C18.6302 25.6025 18.5875 25.5903 18.5457 25.5763C18.526 25.5702 18.5064 25.5631 18.4869 25.5556C18.4465 25.5395 18.407 25.5222 18.3685 25.5032C18.3477 25.4936 18.3263 25.4824 18.3051 25.4706C18.2676 25.4489 18.2313 25.4264 18.1961 25.4024C18.1803 25.3923 18.1654 25.3817 18.1507 25.3708C18.0895 25.324 18.0395 25.2806 17.9928 25.234L17.9907 25.2325L12.4503 19.6861C11.8949 19.1302 11.8968 18.2307 12.4544 17.677C12.9614 17.1736 13.7531 17.1294 14.3101 17.5432L14.4697 17.6811L17.575 20.7876L17.5754 1.42069C17.5754 0.636066 18.2134 0 19.0004 0Z" fill="#200E32"/>
            </svg>
            <p className={style.card__title}>Хостинг</p>
            <p className={style.card__text}>Размещаем ваш сайт на быстром и удобном хостинге</p>
            <p className={style.card__number}>01</p>
          </div>

          <div className={style.card + " " + style.card2} ref={card2}>
            <svg style={{marginBottom:"75px"}}width="38" height="40" viewBox="0 0 38 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.1973 13.9653C10.9843 13.9653 11.6223 14.6014 11.6223 15.386C11.6223 16.1053 11.0862 16.6997 10.3907 16.7937L10.1973 16.8067H8.4075C5.44851 16.8067 3.02852 19.1132 2.85944 22.0201L2.85 22.3455V31.599C2.85 34.5595 5.17183 36.9801 8.09887 37.1492L8.4265 37.1586H29.5925C32.5528 37.1586 34.9716 34.8526 35.1406 31.9435L35.15 31.6179V22.3664C35.15 19.4042 32.8302 16.9852 29.903 16.8161L29.5754 16.8067H27.8027C27.0157 16.8067 26.3777 16.1707 26.3777 15.386C26.3777 14.6668 26.9138 14.0724 27.6093 13.9783L27.8027 13.9653H29.5754C34.0963 13.9653 37.7838 17.5136 37.9908 21.9708L38 22.3664V31.6179C38 36.1156 34.4485 39.7849 29.9883 39.9909L29.5925 40H8.4265C3.90595 40 0.216318 36.4503 0.00917252 31.9944L0 31.599V22.3455C0 17.8538 3.54693 14.1868 8.00023 13.975L8.4075 13.9653H10.1973ZM19.0004 0C19.7218 0 20.318 0.534472 20.4124 1.22791L20.4254 1.42069L20.425 20.7876L23.5311 17.6811C24.036 17.1757 24.8275 17.1282 25.3862 17.5398L25.5463 17.677C26.0533 18.1803 26.1009 18.9695 25.6881 19.5265L25.5505 19.6861L20.0101 25.2325C19.9634 25.2785 19.9159 25.32 19.8657 25.3583L20.0101 25.2325C19.9402 25.3025 19.8648 25.3637 19.7853 25.4161C19.7564 25.4345 19.7263 25.4527 19.6955 25.4699C19.676 25.4815 19.6564 25.4918 19.6366 25.5017C19.5971 25.5207 19.5562 25.5388 19.5144 25.5549C19.4928 25.5637 19.4713 25.5714 19.4497 25.5786C19.4101 25.5912 19.369 25.6028 19.3271 25.6126C19.3044 25.6184 19.2822 25.623 19.26 25.6271C19.2239 25.6333 19.1864 25.6387 19.1485 25.6426C19.1098 25.647 19.0717 25.6494 19.0336 25.6503C19.0224 25.65 19.0114 25.6501 19.0004 25.6501L18.969 25.6504C18.9303 25.6495 18.8915 25.6471 18.8529 25.6431L19.0004 25.6501C18.9114 25.6501 18.8243 25.642 18.7398 25.6264C18.7184 25.623 18.6961 25.6183 18.674 25.6131C18.6302 25.6025 18.5875 25.5903 18.5457 25.5763C18.526 25.5702 18.5064 25.5631 18.4869 25.5556C18.4465 25.5395 18.407 25.5222 18.3685 25.5032C18.3477 25.4936 18.3263 25.4824 18.3051 25.4706C18.2676 25.4489 18.2313 25.4264 18.1961 25.4024C18.1803 25.3923 18.1654 25.3817 18.1507 25.3708C18.0895 25.324 18.0395 25.2806 17.9928 25.234L17.9907 25.2325L12.4503 19.6861C11.8949 19.1302 11.8968 18.2307 12.4544 17.677C12.9614 17.1736 13.7531 17.1294 14.3101 17.5432L14.4697 17.6811L17.575 20.7876L17.5754 1.42069C17.5754 0.636066 18.2134 0 19.0004 0Z" fill="#200E32"/>
            </svg>
            <p className={style.card__title}>Хостинг</p>
            <p className={style.card__text}>Размещаем ваш сайт на быстром и удобном хостинге</p>
            <p className={style.card__number}>02</p>
          </div>

          <div className={style.card + " " + style.card3} ref={card3}>
            <svg style={{marginBottom:"75px"}}width="38" height="40" viewBox="0 0 38 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.1973 13.9653C10.9843 13.9653 11.6223 14.6014 11.6223 15.386C11.6223 16.1053 11.0862 16.6997 10.3907 16.7937L10.1973 16.8067H8.4075C5.44851 16.8067 3.02852 19.1132 2.85944 22.0201L2.85 22.3455V31.599C2.85 34.5595 5.17183 36.9801 8.09887 37.1492L8.4265 37.1586H29.5925C32.5528 37.1586 34.9716 34.8526 35.1406 31.9435L35.15 31.6179V22.3664C35.15 19.4042 32.8302 16.9852 29.903 16.8161L29.5754 16.8067H27.8027C27.0157 16.8067 26.3777 16.1707 26.3777 15.386C26.3777 14.6668 26.9138 14.0724 27.6093 13.9783L27.8027 13.9653H29.5754C34.0963 13.9653 37.7838 17.5136 37.9908 21.9708L38 22.3664V31.6179C38 36.1156 34.4485 39.7849 29.9883 39.9909L29.5925 40H8.4265C3.90595 40 0.216318 36.4503 0.00917252 31.9944L0 31.599V22.3455C0 17.8538 3.54693 14.1868 8.00023 13.975L8.4075 13.9653H10.1973ZM19.0004 0C19.7218 0 20.318 0.534472 20.4124 1.22791L20.4254 1.42069L20.425 20.7876L23.5311 17.6811C24.036 17.1757 24.8275 17.1282 25.3862 17.5398L25.5463 17.677C26.0533 18.1803 26.1009 18.9695 25.6881 19.5265L25.5505 19.6861L20.0101 25.2325C19.9634 25.2785 19.9159 25.32 19.8657 25.3583L20.0101 25.2325C19.9402 25.3025 19.8648 25.3637 19.7853 25.4161C19.7564 25.4345 19.7263 25.4527 19.6955 25.4699C19.676 25.4815 19.6564 25.4918 19.6366 25.5017C19.5971 25.5207 19.5562 25.5388 19.5144 25.5549C19.4928 25.5637 19.4713 25.5714 19.4497 25.5786C19.4101 25.5912 19.369 25.6028 19.3271 25.6126C19.3044 25.6184 19.2822 25.623 19.26 25.6271C19.2239 25.6333 19.1864 25.6387 19.1485 25.6426C19.1098 25.647 19.0717 25.6494 19.0336 25.6503C19.0224 25.65 19.0114 25.6501 19.0004 25.6501L18.969 25.6504C18.9303 25.6495 18.8915 25.6471 18.8529 25.6431L19.0004 25.6501C18.9114 25.6501 18.8243 25.642 18.7398 25.6264C18.7184 25.623 18.6961 25.6183 18.674 25.6131C18.6302 25.6025 18.5875 25.5903 18.5457 25.5763C18.526 25.5702 18.5064 25.5631 18.4869 25.5556C18.4465 25.5395 18.407 25.5222 18.3685 25.5032C18.3477 25.4936 18.3263 25.4824 18.3051 25.4706C18.2676 25.4489 18.2313 25.4264 18.1961 25.4024C18.1803 25.3923 18.1654 25.3817 18.1507 25.3708C18.0895 25.324 18.0395 25.2806 17.9928 25.234L17.9907 25.2325L12.4503 19.6861C11.8949 19.1302 11.8968 18.2307 12.4544 17.677C12.9614 17.1736 13.7531 17.1294 14.3101 17.5432L14.4697 17.6811L17.575 20.7876L17.5754 1.42069C17.5754 0.636066 18.2134 0 19.0004 0Z" fill="#200E32"/>
            </svg>
            <p className={style.card__title}>Хостинг</p>
            <p className={style.card__text}>Размещаем ваш сайт на быстром и удобном хостинге</p>
            <p className={style.card__number}>03</p>
          </div>

          <div className={style.card + " " + style.card4} ref={card4}>
            <svg style={{marginBottom:"75px"}}width="38" height="40" viewBox="0 0 38 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.1973 13.9653C10.9843 13.9653 11.6223 14.6014 11.6223 15.386C11.6223 16.1053 11.0862 16.6997 10.3907 16.7937L10.1973 16.8067H8.4075C5.44851 16.8067 3.02852 19.1132 2.85944 22.0201L2.85 22.3455V31.599C2.85 34.5595 5.17183 36.9801 8.09887 37.1492L8.4265 37.1586H29.5925C32.5528 37.1586 34.9716 34.8526 35.1406 31.9435L35.15 31.6179V22.3664C35.15 19.4042 32.8302 16.9852 29.903 16.8161L29.5754 16.8067H27.8027C27.0157 16.8067 26.3777 16.1707 26.3777 15.386C26.3777 14.6668 26.9138 14.0724 27.6093 13.9783L27.8027 13.9653H29.5754C34.0963 13.9653 37.7838 17.5136 37.9908 21.9708L38 22.3664V31.6179C38 36.1156 34.4485 39.7849 29.9883 39.9909L29.5925 40H8.4265C3.90595 40 0.216318 36.4503 0.00917252 31.9944L0 31.599V22.3455C0 17.8538 3.54693 14.1868 8.00023 13.975L8.4075 13.9653H10.1973ZM19.0004 0C19.7218 0 20.318 0.534472 20.4124 1.22791L20.4254 1.42069L20.425 20.7876L23.5311 17.6811C24.036 17.1757 24.8275 17.1282 25.3862 17.5398L25.5463 17.677C26.0533 18.1803 26.1009 18.9695 25.6881 19.5265L25.5505 19.6861L20.0101 25.2325C19.9634 25.2785 19.9159 25.32 19.8657 25.3583L20.0101 25.2325C19.9402 25.3025 19.8648 25.3637 19.7853 25.4161C19.7564 25.4345 19.7263 25.4527 19.6955 25.4699C19.676 25.4815 19.6564 25.4918 19.6366 25.5017C19.5971 25.5207 19.5562 25.5388 19.5144 25.5549C19.4928 25.5637 19.4713 25.5714 19.4497 25.5786C19.4101 25.5912 19.369 25.6028 19.3271 25.6126C19.3044 25.6184 19.2822 25.623 19.26 25.6271C19.2239 25.6333 19.1864 25.6387 19.1485 25.6426C19.1098 25.647 19.0717 25.6494 19.0336 25.6503C19.0224 25.65 19.0114 25.6501 19.0004 25.6501L18.969 25.6504C18.9303 25.6495 18.8915 25.6471 18.8529 25.6431L19.0004 25.6501C18.9114 25.6501 18.8243 25.642 18.7398 25.6264C18.7184 25.623 18.6961 25.6183 18.674 25.6131C18.6302 25.6025 18.5875 25.5903 18.5457 25.5763C18.526 25.5702 18.5064 25.5631 18.4869 25.5556C18.4465 25.5395 18.407 25.5222 18.3685 25.5032C18.3477 25.4936 18.3263 25.4824 18.3051 25.4706C18.2676 25.4489 18.2313 25.4264 18.1961 25.4024C18.1803 25.3923 18.1654 25.3817 18.1507 25.3708C18.0895 25.324 18.0395 25.2806 17.9928 25.234L17.9907 25.2325L12.4503 19.6861C11.8949 19.1302 11.8968 18.2307 12.4544 17.677C12.9614 17.1736 13.7531 17.1294 14.3101 17.5432L14.4697 17.6811L17.575 20.7876L17.5754 1.42069C17.5754 0.636066 18.2134 0 19.0004 0Z" fill="#200E32"/>
            </svg>
            <p className={style.card__title}>Хостинг</p>
            <p className={style.card__text}>Размещаем ваш сайт на быстром и удобном хостинге</p>
            <p className={style.card__number}>04</p>
          </div>

          <div className={style.card + " " + style.card5} ref={card5}>
            <svg style={{marginBottom:"75px"}}width="38" height="40" viewBox="0 0 38 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.1973 13.9653C10.9843 13.9653 11.6223 14.6014 11.6223 15.386C11.6223 16.1053 11.0862 16.6997 10.3907 16.7937L10.1973 16.8067H8.4075C5.44851 16.8067 3.02852 19.1132 2.85944 22.0201L2.85 22.3455V31.599C2.85 34.5595 5.17183 36.9801 8.09887 37.1492L8.4265 37.1586H29.5925C32.5528 37.1586 34.9716 34.8526 35.1406 31.9435L35.15 31.6179V22.3664C35.15 19.4042 32.8302 16.9852 29.903 16.8161L29.5754 16.8067H27.8027C27.0157 16.8067 26.3777 16.1707 26.3777 15.386C26.3777 14.6668 26.9138 14.0724 27.6093 13.9783L27.8027 13.9653H29.5754C34.0963 13.9653 37.7838 17.5136 37.9908 21.9708L38 22.3664V31.6179C38 36.1156 34.4485 39.7849 29.9883 39.9909L29.5925 40H8.4265C3.90595 40 0.216318 36.4503 0.00917252 31.9944L0 31.599V22.3455C0 17.8538 3.54693 14.1868 8.00023 13.975L8.4075 13.9653H10.1973ZM19.0004 0C19.7218 0 20.318 0.534472 20.4124 1.22791L20.4254 1.42069L20.425 20.7876L23.5311 17.6811C24.036 17.1757 24.8275 17.1282 25.3862 17.5398L25.5463 17.677C26.0533 18.1803 26.1009 18.9695 25.6881 19.5265L25.5505 19.6861L20.0101 25.2325C19.9634 25.2785 19.9159 25.32 19.8657 25.3583L20.0101 25.2325C19.9402 25.3025 19.8648 25.3637 19.7853 25.4161C19.7564 25.4345 19.7263 25.4527 19.6955 25.4699C19.676 25.4815 19.6564 25.4918 19.6366 25.5017C19.5971 25.5207 19.5562 25.5388 19.5144 25.5549C19.4928 25.5637 19.4713 25.5714 19.4497 25.5786C19.4101 25.5912 19.369 25.6028 19.3271 25.6126C19.3044 25.6184 19.2822 25.623 19.26 25.6271C19.2239 25.6333 19.1864 25.6387 19.1485 25.6426C19.1098 25.647 19.0717 25.6494 19.0336 25.6503C19.0224 25.65 19.0114 25.6501 19.0004 25.6501L18.969 25.6504C18.9303 25.6495 18.8915 25.6471 18.8529 25.6431L19.0004 25.6501C18.9114 25.6501 18.8243 25.642 18.7398 25.6264C18.7184 25.623 18.6961 25.6183 18.674 25.6131C18.6302 25.6025 18.5875 25.5903 18.5457 25.5763C18.526 25.5702 18.5064 25.5631 18.4869 25.5556C18.4465 25.5395 18.407 25.5222 18.3685 25.5032C18.3477 25.4936 18.3263 25.4824 18.3051 25.4706C18.2676 25.4489 18.2313 25.4264 18.1961 25.4024C18.1803 25.3923 18.1654 25.3817 18.1507 25.3708C18.0895 25.324 18.0395 25.2806 17.9928 25.234L17.9907 25.2325L12.4503 19.6861C11.8949 19.1302 11.8968 18.2307 12.4544 17.677C12.9614 17.1736 13.7531 17.1294 14.3101 17.5432L14.4697 17.6811L17.575 20.7876L17.5754 1.42069C17.5754 0.636066 18.2134 0 19.0004 0Z" fill="#200E32"/>
            </svg>
            <p className={style.card__title}>Хостинг</p>
            <p className={style.card__text}>Размещаем ваш сайт на быстром и удобном хостинге</p>
            <p className={style.card__number}>05</p>
          </div>

        </div>

      </div>
    </section>
  )
}

export default SolutionServices
